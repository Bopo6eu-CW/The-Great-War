namespace = world_war_1


# Trigger the war itself
world_war_1.1 = {
    type = country_event
    placement = root
    hidden = no

    title = world_war_1.1.t
    desc = world_war_1.1.d
    flavor = world_war_1.1.f
    icon = "gfx/interface/icons/event_icons/event_skull.dds"


    on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
    on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"

    trigger = {
        # Trigger conditions for the event to fire
        exists = c:AUS
        exists = c:SER
        exists = c:GER
        exists = c:ITA
        exists = c:FRA
        exists = c:RUS
        exists = c:GBR
        game_date >= 1911.1.1
    }

    event_image = {
        # There are two types of event images: video and texture
        # video should be a bk2 (Bink Video) file
        video = "gfx/event_pictures/southamerica_public_figure_assassination.bk2"
        # Static images are called 'texture' instead
        # texture should be a dds (DirectDraw Surface) file
        # texture = "gfx/texture.dds"
    }

    option = {
        name = world_war_1.1.1
        c:AUS = {
            trigger_world_war = {
                COUNTRY = c:SER
                INIT = c:AUS
            }
            heir = {
                kill_character = THIS
            }
        }
    }
}


# Add countries of each alliance to the war
world_war_1.2 = {
    type = country_event
    placement = root
    hidden = no


    title = world_war_1.2.t
    desc = world_war_1.2.d

    trigger = {
        has_global_variable = world_war_1_begun
    }
    option = {
        name = world_war_1.2.1
        every_country = {
            limit = {
                is_in_entente = {
                    COUNTRY = THIS
                }
            }
            THIS = {
                save_scope_as = supporting_country
            }
            enter_world_war_defender_side = {
                COUNTRY = scope:supporting_country
            }
        }
    }
    option = {
        name = world_war_1.2.2
        every_country = {
            limit = {
                is_in_central_powers = {
                    COUNTRY = THIS
                }
            }
            THIS = {
                save_scope_as = supporting_country
            }
            enter_world_war_attacker_side = {
                COUNTRY = scope:supporting_country
            }
        }
    }
}


# Peace deal
world_war_1.3 = {
    type = country_event
    placement = root
    hidden = no


    title = world_war_1.3.t
    desc = world_war_1.3.d

trigger = {
    # The World War I global variable has been set
    has_global_variable = world_war_1_begun
        
    
    # Germany has lost control of key territories
    c:GER = {
        NOT = { owns_entire_state_region = STATE_ALSACE_LORRAINE }
        NOT = { owns_entire_state_region = STATE_RHINELAND }
    }
    
    # The Ottoman Empire is close to capitulation
    c:TUR = {
        OR = {
            NOT = { owns_entire_state_region = STATE_EASTERN_THRACE }
            NOT = { owns_entire_state_region = STATE_PALESTINE }
            has_war_exhaustion = {
                target = c:TUR 
                value >= 50
            }
        }
    }
    
    # Russia has either left the war or is close to defeat
    OR = {
        NOT = { c:RUS = { is_subject_of = c:GER } }
        c:RUS = {
            OR = {
                NOT = { owns_entire_state_region = STATE_POLAND }
            has_war_exhaustion = {
                target = c:RUS 
                value >= 50
            }
            }
        }
    }
}
    option = {
        name = world_war_1.3.1
    }
}


world_war_1.4 = {
    type = country_event
    placement = root

    title = world_war_1.4.t
    desc = world_war_1.4.d
    flavor = world_war_1.4.f

    event_image = {
        video = "gfx/event_pictures/unspecific_signed_contract.bk2"
    }

    on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
    on_opened_soundeffect = "event:/SFX/Events/unspecific/signed_contract"

    option = {
        name = world_war_1.4.a
        default_option = yes
        custom_tooltip = tgw_peace_conference_demands_tooltip
        every_country = {
            limit = {
                is_at_war_with = root
            }
            root = {
                set_relations = { country = prev value = 0 }
            }
            end_war = root
        }
    }
}